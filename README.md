Go style error handling for promises